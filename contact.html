<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style-content/ct.css">
    <!-- logo du site -->
    <link rel="website icon" href="img-content/favicon.ico" type="image/x-icon">
    <title>Contact</title>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li><a href="reseaux.html">Mes Réseaux</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <form id="ct-form" action="https://formspree.io/f/mgedewlz" method="POST">
            <h2>Formulaire de contact</h2>
            <label>
                Email :
            </label>
            <input id="mail" type="email" name="email" />
            <label>
                Message :
            </label>
            <input id="txt" type="message" name="message" />
            <button id="btn-form">
                Envoyer
            </button>
            <p id="form-status"></p>
          </form>
    </main>
    
    <footer>
        <div>
            <span>2021 &copy; lesloulous</span>
        </div>
    </footer>
    <script>
        var form = document.getElementById("ct-form");
        async function handleSubmit(event) {
          event.preventDefault();
          var status = document.getElementById("form-status");
          var data = new FormData(event.target);
          fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: {
                'Accept': 'application/json'
            }
          }).then(response => {
            status.innerHTML = "Message envoyée !";
            form.reset()
          }).catch(error => {
            status.innerHTML = "Oups! Le formulaire de contact à rencontré une erreur."
          });
        }
        form.addEventListener("submit", handleSubmit)
    </script>
</body>
</html>